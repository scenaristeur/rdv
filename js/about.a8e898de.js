"use strict";(self["webpackChunkrdv"]=self["webpackChunkrdv"]||[]).push([[443],{5481:function(e,l,t){t.r(l),t.d(l,{default:function(){return C}});var o=t(3396);const a={class:"home"};function n(e,l,t,n,i,u){const r=(0,o.up)("HelloWorld");return(0,o.wg)(),(0,o.iD)("div",a,[(0,o.Wm)(r)])}var i=t(4870),u=t(9242),r=t(7139),d=t(5469),c=t(7676),s=t(7548),m="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAADFUlEQVR4Xu2a/bVNMRDF96vAUwE6eCqgA1SADp4KUAEdoAJU8KiADngVoALWb62bta6Y5EySm+uedSZ/3puPmZ2dyew5OdPG29nG/VcAEAzYOAJxBDZOgAiCLUfgtqTnkh5KOm9gTssa1rS/G9b6KemDpJeSvnvGeY27L+l9o+Npfe8aJXtbAEhzAMQjSZ+WQPAYx85/6XSe9T1r1OzsAYD5AOHuEhM8xr2V9HgJycr/njVmAMCc7yQ9qU3uMe7HwO7/TwYkFtwcBcCi4GfP+dot/GKAPQz1jueoWkytbrKHARYARFmvYYP+u4cTqK+M3gHAjCMQDIgjEDEggmDcAu4L6t+ODyRdZD9/lfRxYM6TvwZRkK8WUtOk5p7tcvkWPE4aAPJxnPfKaIAABHSIt00DwGtAqR+xgjpCT5ueb3hS4R7D0xh2/s3IBJKeNjKhabmZAED3bxXaX+9pdYTMrYLlHIc7HTHBBcRMAEp1hF+7QEjpar9RamPMDcPyRV3v8rZVKfVOuhtnqUicZ7fZVavBGmp5OQj0r+r6XltnMYDdpIaYN+p0+c7nfUbGNuMwCwAr8nPm2X1PgwV5TJhyIxwTAKpI3NWeRjX3XtYxAJghwY/JAGjNdeZpXJ/5cVkVA0YC2chYD7h/9ZnFABaxrsGlpKaUPHF9enVEEwgzASglQoBAemslQqTNlqOrTIRKSU3aIWJC+oDJeS9dkUvJU9OO551nMoC1Ni2GEtirl8OH+DIEE14XhI5FYWh/2SiDpxVEDgEAThITAIFrzlJ89MFxgiPOlwRT6cyfPAD7hgOCVRRdEkq1gLcqAIYid2FwABBfh+PzeLwPiAcSRoCMFyK1K8ejBaxECKXn/WxFKWyk5aWx0lzkFSRaTXrHAwAZWSlz8zjmWaM2T+9DyZRZVusIHuM2/1ASnc63+14WeECewQB0Bcei+mjaaxxpJnl6DwjeNUog9BwBnEdvHOSxdDIMJqDta2rOcuKYACQ1iZ0HfS7vCXar7DO6O6t0et/oAGD1WzjoQDBgEMDVDw8GrH4LBx34A8fSukGbT39pAAAAAElFTkSuQmCC",v=t(6866),p=t(1330),f=t(5288),w=t(3029),g=t(5144);const A=e=>((0,o.dD)("data-v-5277e260"),e=e(),(0,o.Cn)(),e),W=A((()=>(0,o._)("label",{for:"checkbox"},"Fake",-1))),_=A((()=>(0,o._)("label",{for:"follow_me"},"Follow me",-1))),D=A((()=>(0,o._)("br",null,null,-1))),h=A((()=>(0,o._)("textarea",{name:"my_interest",id:"",cols:"30",rows:"10"},null,-1))),y=["for"],k=A((()=>(0,o._)("hr",null,null,-1))),S=A((()=>(0,o._)("small",null,[(0,o._)("i",null,"right-click or long tap on the map to add a rdv")],-1)));var H={__name:"HelloWorld",setup(e){(0,f.QB)(v);const l=(0,i.iH)([2.2945009486790244,48.858287635592696]),t=(0,i.iH)("EPSG:4326"),a=(0,i.iH)(17),n=(0,i.iH)(0),A=(0,i.iH)(),H=(0,i.iH)(null),I=(0,i.iH)([]),x=(0,i.iH)([]),T=(0,i.iH)([]),E=(0,i.iH)([]),U=(0,i.iH)(!1),C=(0,i.iH)(!0);let F=!1,V=!0;const b=(0,i.iH)(5),O=(0,i.iH)(1),B=(0,i.iH)("red"),M=(0,i.iH)("white"),P=(0,o.f3)("ol-feature"),Y=(0,o.f3)("ol-geom"),K=(0,i.iH)(!1),R=(0,i.iH)(!1),j=(0,i.iH)(new g.Z),Z=(0,o.f3)("ol-selectconditions"),G=Z.click;function J(e){if(console.log(e),e.selected.length>0){let l=e.selected[0].get("uuid");console.log("selected",e.selected[0],e.selected[0].get("uuid")),z.value=p.h.rdvs[l],console.log(z.value.author,"if author = clientID, edit = true"),R.value=!1,K.value=!0}}const Q=[{id:"title",name:"Title",type:"text"},{id:"desc",name:"Description",type:"text"},{id:"color",name:"Color",type:"color"},{id:"start_date",name:"Start Date",type:"date",min:(new Date).toISOString().split("T")[0]},{id:"start_time",name:"Start Time",type:"time"},{id:"end_date",name:"End Date",type:"date",min:(new Date).toISOString().split("T")[0]},{id:"end_time",name:"End Time",type:"time"}];let z=(0,i.iH)({});x.value=[{text:"Center map here",icon:m,classname:"some-style-class",callback:e=>{A.value.setCenter(e.coordinate)}},{text:"Add a rdv",classname:"some-style-class",icon:s,callback:e=>{z.value={uuid:(0,w.Z)(),author:p.kW.clientID,coordinates:e.coordinate,start_date:(new Date).toISOString().split("T")[0],end_date:(new Date).toISOString().split("T")[0],start_time:"00:00",end_time:"23:59"},R.value=!0,K.value=!0}},"-"];const X=()=>{console.log(z.value),z.value.updated=Date.now();const e=new P({geometry:new Y.Point(z.value.coordinates),data:z.value});1==R.value&&(T.value.source.addFeature(e),p.h.rdvs[z.value.uuid]=z.value)},q=(e,l)=>{let t=e.get("color");void 0!=l.getImage().getFill&&l.getImage().getFill().setColor(t);let o=e.get("name");l.getText().setText(o)};p.kW.setLocalStateField("user",{name:"user_"+Date.now(),color:"#ffb61e",clientID:p.kW.clientID});const N=e=>{console.log(p.kW.clientID,e);let l=e.target.getPosition();U.value.checked&&(l[0]+=.02*Math.random()-.01,l[1]+=.02*Math.random()-.01),I.value=l,console.log("follow_me.value.checked",C.value.checked),C.value.checked&&A.value?.setCenter(l),p.kW.setLocalStateField("position",{coordinates:l,updated:Date.now()})},L=e=>{e.forEach((e=>{if(void 0!=e.position&&null!=E.value&&e.user.clientID!=p.kW.clientID&&void 0!=E.value.source){let l=E.value.source.getFeatures().find((l=>l.get("clientID")==e.user.clientID));if(void 0==l){const l=new P({geometry:new Y.Point(e.position.coordinates),name:e.user.name,color:e.user.color,clientID:e.user.clientID});E.value.source.addFeature(l)}else l.getGeometry().setCoordinates(e.position.coordinates)}}))};p.kW.on("change",(()=>{L(Array.from(p.kW.getStates().values()))}));const $=e=>{if(console.log(e),null!=T.value)for(let[l,t]of Object.entries(p.h.rdvs))if(l!=p.kW.clientID){console.log("coordin",l,t.coordinates[0],t.coordinates[1],t.title),console.log("dates",l,t.end_date,t.end_time);let e=t.end_date+"T"+t.end_time+":00Z",o=new Date(e),a=Date.now();console.log(a,o);let n=o.getTime()-a;if(n<0)return void delete p.h.rdvs[l];if(void 0!=t.end_date&&void 0!=t.end_time){const e=new P({geometry:new Y.Point(t.coordinates),name:t.title,uuid:l});T.value.source.addFeature(e)}else console.log(l,"no end_date"),delete p.h.rdvs[l]}};return(0,f.QT)(p.h.rdvs,$),$(),(e,s)=>{const m=(0,o.up)("ol-view"),v=(0,o.up)("ol-source-osm"),p=(0,o.up)("ol-tile-layer"),f=(0,o.up)("ol-context-menu-control"),w=(0,o.up)("ol-source-vector"),g=(0,o.up)("ol-style-fill"),P=(0,o.up)("ol-style-icon"),Y=(0,o.up)("ol-style-text"),Z=(0,o.up)("ol-style"),L=(0,o.up)("ol-vector-layer"),$=(0,o.up)("ol-interaction-select"),ee=(0,o.up)("ol-style-stroke"),le=(0,o.up)("ol-style-circle"),te=(0,o.up)("ol-geom-point"),oe=(0,o.up)("ol-feature"),ae=(0,o.up)("ol-geolocation"),ne=(0,o.up)("ol-map"),ie=(0,o.up)("BCol"),ue=(0,o.up)("BFormInput"),re=(0,o.up)("BRow"),de=(0,o.up)("BModal");return(0,o.wg)(),(0,o.iD)("div",null,[(0,o.Wm)(ne,{loadTilesWhileAnimating:!0,loadTilesWhileInteracting:!0,style:{height:"80vh"},ref_key:"map",ref:H},{default:(0,o.w5)((()=>[(0,o.Wm)(m,{ref_key:"view",ref:A,center:l.value,rotation:n.value,zoom:a.value,projection:t.value},null,8,["center","rotation","zoom","projection"]),(0,o.Wm)(p,null,{default:(0,o.w5)((()=>[(0,o.Wm)(v)])),_:1}),(0,o.Wm)(f,{items:x.value},null,8,["items"]),(0,o.Wm)(L,null,{default:(0,o.w5)((()=>[(0,o.Wm)(w,{ref_key:"markers",ref:T},null,512),(0,o.Wm)(Z,{overrideStyleFunction:q},{default:(0,o.w5)((()=>[(0,o.Wm)(g,{color:M.value},null,8,["color"]),(0,o.Wm)(P,{src:(0,i.SU)(c),scale:.05},null,8,["src"]),(0,o.Wm)(Y,{text:"Hellooooo"})])),_:1})])),_:1}),(0,o.Wm)($,{onSelect:J,condition:(0,i.SU)(G),features:j.value},{default:(0,o.w5)((()=>[(0,o.Wm)(Z,{overrideStyleFunction:q},{default:(0,o.w5)((()=>[(0,o.Wm)(g,{color:M.value},null,8,["color"]),(0,o.Wm)(P,{src:(0,i.SU)(c),scale:.1},null,8,["src"]),(0,o.Wm)(Y,{color:"white",text:"Hellooooo"})])),_:1})])),_:1},8,["condition","features"]),(0,o.Wm)(L,null,{default:(0,o.w5)((()=>[(0,o.Wm)(w,{ref_key:"users",ref:E},null,512),(0,o.Wm)(Z,{overrideStyleFunction:q},{default:(0,o.w5)((()=>[(0,o.Wm)(le,{radius:b.value},{default:(0,o.w5)((()=>[(0,o.Wm)(g,{color:M.value},null,8,["color"]),(0,o.Wm)(ee,{color:B.value,width:O.value},null,8,["color","width"]),(0,o.Wm)(Y,{text:"Hellooooo"})])),_:1},8,["radius"])])),_:1})])),_:1}),(0,o.Wm)(ae,{projection:t.value,"onChange:position":N},{default:(0,o.w5)((()=>[(0,o._)("template",null,[(0,o.Wm)(L,{zIndex:2},{default:(0,o.w5)((()=>[(0,o.Wm)(w,null,{default:(0,o.w5)((()=>[(0,o.Wm)(oe,{ref:"positionFeature"},{default:(0,o.w5)((()=>[(0,o.Wm)(te,{coordinates:I.value},null,8,["coordinates"]),(0,o.Wm)(Z,null,{default:(0,o.w5)((()=>[(0,o.Wm)(P,{src:(0,i.SU)(d),scale:.1},null,8,["src"])])),_:1})])),_:1},512)])),_:1})])),_:1})])])),_:1},8,["projection"])])),_:1},512),(0,o.wy)((0,o._)("input",{type:"checkbox",id:"checkbox",ref_key:"faking",ref:U,"onUpdate:modelValue":s[0]||(s[0]=e=>(0,i.dq)(F)?F.value=e:F=e)},null,512),[[u.e8,(0,i.SU)(F)]]),W,(0,o.Uk)("    "),(0,o.wy)((0,o._)("input",{type:"checkbox",id:"follow_me",ref_key:"follow_me",ref:C,checked:"","onUpdate:modelValue":s[1]||(s[1]=e=>(0,i.dq)(V)?V.value=e:V=e)},null,512),[[u.e8,(0,i.SU)(V)]]),_,D,h,(0,o.Wm)(de,{modelValue:K.value,"onUpdate:modelValue":s[2]||(s[2]=e=>K.value=e),onOk:X},{default:(0,o.w5)((()=>[((0,o.wg)(),(0,o.iD)(o.HY,null,(0,o.Ko)(Q,(e=>(0,o.Wm)(re,{class:"my-1",key:e.id},{default:(0,o.w5)((()=>[(0,o.Wm)(ie,{sm:"3"},{default:(0,o.w5)((()=>[(0,o._)("label",{for:`type-${e.name}`},[(0,o._)("code",null,(0,r.zw)(e.name),1),(0,o.Uk)(":")],8,y)])),_:2},1024),(0,o.Wm)(ie,{sm:"9"},{default:(0,o.w5)((()=>[(0,o.Wm)(ue,{disabled:!R.value,id:`type-${e.name}`,type:e.type,modelValue:(0,i.SU)(z)[e.id],"onUpdate:modelValue":l=>(0,i.SU)(z)[e.id]=l,min:e.min},null,8,["disabled","id","type","modelValue","onUpdate:modelValue","min"])])),_:2},1024)])),_:2},1024))),64))])),_:1},8,["modelValue"]),k,S,(0,o.Uk)(" 0.0.1 ")])}}},I=t(89);const x=(0,I.Z)(H,[["__scopeId","data-v-5277e260"]]);var T=x,E={name:"HomeView",components:{HelloWorld:T}};const U=(0,I.Z)(E,[["render",n]]);var C=U}}]);
//# sourceMappingURL=about.a8e898de.js.map