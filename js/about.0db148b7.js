"use strict";(self["webpackChunkrdv"]=self["webpackChunkrdv"]||[]).push([[443],{5709:function(e,t,l){l.r(t),l.d(t,{default:function(){return V}});var o=l(3396);const a={class:"home"};function n(e,t,l,n,i,r){const u=(0,o.up)("HelloWorld");return(0,o.wg)(),(0,o.iD)("div",a,[(0,o.Wm)(u)])}var i=l(4870),r=l(9242),u=l(7139),d=l(5469),c=l.p+"img/marker.f58b9982.png",s="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAADUElEQVR4Xu2a/ZFNQRDFz0aACBABIkAEiAARIAJEgAjYCBABIkAEiAARUD91p+rtrX13pme6+131bv+zW/VmpnvO9MeZvnOiI5eTI9+/NgA2DzhyBA4RAtclXZN0ZYb9d0lfJX3JPJMsAG5Jui/prqSLlQ0CxEdJp9PfUDyiAeCUX0sCgB4BiIeSACVEIgF4JOmlk9WPJb1yWuvMMlEAcOoPnA1+M3mD67IRALydYt3V0Gmxd5LueS7sDQAuj+tHCqFASLiIJwBkeE4/Q/ACvGFYPAH4dk5tHzZwzwJUhasei3sBQMIj8WUK5ZHEOCReAGSeftmwixd4AAC1/Ww8hvcTR4DoIOQPvOiOcZ0bo9TZAwAy8guD4Uuuaw2lJ6NkywMATvFmIwDPJT2rjOX3p43rfRqg2f9UZANwSdKvyua4LP38nwD4E2Bsq1cBJqB2i4cHtAJA4iPZtUgrAMNenAkAjQ6ydotQVaguLTK0h6HJk3WW04K91e729BDgFS2yiiQIG6Pb0yKAdbsy0HKbpGs0dO328AArD+ASAxeYVwOyP3zCsqFV8IAeJsjmAaKEA27f0i+cO88qmCBGsZHLLTHgOOaHx+3TIwTYU0YjZI6dS2PECwBL5vZygpaKUtXlBQCKiGnrba5q4J4BFlK1qMMTAHr/H3p3ZJxHKS1XaePUs8M9AWBlCynqNXyY/Owq9gYgwwvcTh8gvAGI9gLX048CILIiuGT+yBAoa0fwApe6P088ESGADng97PBCb6abzYP1Qblr3SSzuigAMMTzS5Hbl6AsDyh6PMiRG+k5zz0iPcAjFH5PFx531y9gRAMwGgphrp8JALp6qkJI1s/OAbv6aIryOqxFeC3W2hRtWW/vmIwQKMohSIBQK43EPZuvNU+HNp4dAkVfS2kMj/sMJrh0Okvf/lq+Hbqc/KE8YIkfhNb7fahl5oBdG6DK9A5KUiTpcZUOq/drA2CXJPE/CTJ98yg+lAeUAymlLvWB9KGToGsSG13s0B4wav/w/F4ASFitz2KGjWxcgJ6B+dlcLwCWdzyN9g8P6+oXbgB04r55gOEpWyfG5mmpIcAjBstDBvNuOibAJczP6HtzQId965yyAbDOc8mzavOAPKzXqekvWhOGQSnRji0AAAAASUVORK5CYII=",m="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAADFUlEQVR4Xu2a/bVNMRDF96vAUwE6eCqgA1SADp4KUAEdoAJU8KiADngVoALWb62bta6Y5EySm+uedSZ/3puPmZ2dyew5OdPG29nG/VcAEAzYOAJxBDZOgAiCLUfgtqTnkh5KOm9gTssa1rS/G9b6KemDpJeSvnvGeY27L+l9o+Npfe8aJXtbAEhzAMQjSZ+WQPAYx85/6XSe9T1r1OzsAYD5AOHuEhM8xr2V9HgJycr/njVmAMCc7yQ9qU3uMe7HwO7/TwYkFtwcBcCi4GfP+dot/GKAPQz1jueoWkytbrKHARYARFmvYYP+u4cTqK+M3gHAjCMQDIgjEDEggmDcAu4L6t+ODyRdZD9/lfRxYM6TvwZRkK8WUtOk5p7tcvkWPE4aAPJxnPfKaIAABHSIt00DwGtAqR+xgjpCT5ueb3hS4R7D0xh2/s3IBJKeNjKhabmZAED3bxXaX+9pdYTMrYLlHIc7HTHBBcRMAEp1hF+7QEjpar9RamPMDcPyRV3v8rZVKfVOuhtnqUicZ7fZVavBGmp5OQj0r+r6XltnMYDdpIaYN+p0+c7nfUbGNuMwCwAr8nPm2X1PgwV5TJhyIxwTAKpI3NWeRjX3XtYxAJghwY/JAGjNdeZpXJ/5cVkVA0YC2chYD7h/9ZnFABaxrsGlpKaUPHF9enVEEwgzASglQoBAemslQqTNlqOrTIRKSU3aIWJC+oDJeS9dkUvJU9OO551nMoC1Ni2GEtirl8OH+DIEE14XhI5FYWh/2SiDpxVEDgEAThITAIFrzlJ89MFxgiPOlwRT6cyfPAD7hgOCVRRdEkq1gLcqAIYid2FwABBfh+PzeLwPiAcSRoCMFyK1K8ejBaxECKXn/WxFKWyk5aWx0lzkFSRaTXrHAwAZWSlz8zjmWaM2T+9DyZRZVusIHuM2/1ASnc63+14WeECewQB0Bcei+mjaaxxpJnl6DwjeNUog9BwBnEdvHOSxdDIMJqDta2rOcuKYACQ1iZ0HfS7vCXar7DO6O6t0et/oAGD1WzjoQDBgEMDVDw8GrH4LBx34A8fSukGbT39pAAAAAElFTkSuQmCC",A=l(6866),p=l(1330),v=l(5288);const g="undefined"!==typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);var f={randomUUID:g};l(1439),l(7585),l(5315);let w;const y=new Uint8Array(16);function D(){if(!w&&(w="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!w))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return w(y)}l(7658);const W=[];for(let M=0;M<256;++M)W.push((M+256).toString(16).slice(1));function h(e,t=0){return(W[e[t+0]]+W[e[t+1]]+W[e[t+2]]+W[e[t+3]]+"-"+W[e[t+4]]+W[e[t+5]]+"-"+W[e[t+6]]+W[e[t+7]]+"-"+W[e[t+8]]+W[e[t+9]]+"-"+W[e[t+10]]+W[e[t+11]]+W[e[t+12]]+W[e[t+13]]+W[e[t+14]]+W[e[t+15]]).toLowerCase()}function I(e,t,l){if(f.randomUUID&&!t&&!e)return f.randomUUID();e=e||{};const o=e.random||(e.rng||D)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t){l=l||0;for(let e=0;e<16;++e)t[l+e]=o[e];return t}return h(o)}var S=I,k=l(5144);const H=e=>((0,o.dD)("data-v-5277e260"),e=e(),(0,o.Cn)(),e),U=H((()=>(0,o._)("label",{for:"checkbox"},"Fake",-1))),_=H((()=>(0,o._)("label",{for:"follow_me"},"Follow me",-1))),C=H((()=>(0,o._)("br",null,null,-1))),B=H((()=>(0,o._)("textarea",{name:"my_interest",id:"",cols:"30",rows:"10"},null,-1))),O=["for"],E=H((()=>(0,o._)("hr",null,null,-1))),b=H((()=>(0,o._)("small",null,[(0,o._)("i",null,"right-click or long tap on the map to add a rdv")],-1)));var T={__name:"HelloWorld",setup(e){(0,v.QB)(A);const t=(0,i.iH)([2.2945009486790244,48.858287635592696]),l=(0,i.iH)("EPSG:4326"),a=(0,i.iH)(17),n=(0,i.iH)(0),g=(0,i.iH)(),f=(0,i.iH)(null),w=(0,i.iH)([]),y=(0,i.iH)([]),D=(0,i.iH)([]),W=(0,i.iH)([]),h=(0,i.iH)(!1),I=(0,i.iH)(!0);let H=!1,T=!0;const P=(0,i.iH)(5),x=(0,i.iH)(1),F=(0,i.iH)("red"),K=(0,i.iH)("white"),J=(0,o.f3)("ol-feature"),V=(0,o.f3)("ol-geom"),M=(0,i.iH)(!1),R=(0,i.iH)(!1),G=(0,i.iH)(new k.Z),Y=(0,o.f3)("ol-selectconditions"),Z=Y.click;function j(e){if(console.log(e),e.selected.length>0){let t=e.selected[0].get("uuid");console.log("selected",e.selected[0],e.selected[0].get("uuid")),z.value=p.h.rdvs[t],console.log(z.value.author,"if author = clientID, edit = true"),R.value=!1,M.value=!0}}const q=[{id:"title",name:"Title",type:"text"},{id:"desc",name:"Description",type:"text"},{id:"color",name:"Color",type:"color"},{id:"start_date",name:"Start Date",type:"date",min:(new Date).toISOString().split("T")[0]},{id:"start_time",name:"Start Time",type:"time"},{id:"end_date",name:"End Date",type:"date",min:(new Date).toISOString().split("T")[0]},{id:"end_time",name:"End Time",type:"time"}];let z=(0,i.iH)({});y.value=[{text:"Center map here",icon:m,classname:"some-style-class",callback:e=>{g.value.setCenter(e.coordinate)}},{text:"Add a rdv",classname:"some-style-class",icon:s,callback:e=>{z.value={uuid:S(),author:p.kW.clientID,coordinates:e.coordinate,start_date:(new Date).toISOString().split("T")[0],end_date:(new Date).toISOString().split("T")[0],start_time:"00:00",end_time:"23:59"},R.value=!0,M.value=!0}},"-"];const Q=()=>{console.log(z.value),z.value.updated=Date.now();const e=new J({geometry:new V.Point(z.value.coordinates),data:z.value});1==R.value&&(D.value.source.addFeature(e),p.h.rdvs[z.value.uuid]=z.value)},X=(e,t)=>{let l=e.get("color");void 0!=t.getImage().getFill&&t.getImage().getFill().setColor(l);let o=e.get("name");t.getText().setText(o)};p.kW.setLocalStateField("user",{name:"user_"+Date.now(),color:"#ffb61e",clientID:p.kW.clientID});const L=e=>{console.log(p.kW.clientID,e);let t=e.target.getPosition();h.value.checked&&(t[0]+=.02*Math.random()-.01,t[1]+=.02*Math.random()-.01),w.value=t,console.log("follow_me.value.checked",I.value.checked),I.value.checked&&g.value?.setCenter(t),p.kW.setLocalStateField("position",{coordinates:t,updated:Date.now()})},N=e=>{e.forEach((e=>{if(void 0!=e.position&&null!=W.value&&e.user.clientID!=p.kW.clientID&&void 0!=W.value.source){let t=W.value.source.getFeatures().find((t=>t.get("clientID")==e.user.clientID));if(void 0==t){const t=new J({geometry:new V.Point(e.position.coordinates),name:e.user.name,color:e.user.color,clientID:e.user.clientID});W.value.source.addFeature(t)}else t.getGeometry().setCoordinates(e.position.coordinates)}}))};p.kW.on("change",(()=>{N(Array.from(p.kW.getStates().values()))}));const $=e=>{if(console.log(e),null!=D.value)for(let[t,l]of Object.entries(p.h.rdvs))if(t!=p.kW.clientID){console.log("coordin",t,l.coordinates[0],l.coordinates[1],l.title),console.log("dates",t,l.end_date,l.end_time);let e=l.end_date+"T"+l.end_time+":00Z",o=new Date(e),a=Date.now();console.log(a,o);let n=o.getTime()-a;if(n<0)return void delete p.h.rdvs[t];if(void 0!=l.end_date&&void 0!=l.end_time){const e=new J({geometry:new V.Point(l.coordinates),name:l.title,uuid:t});D.value.source.addFeature(e)}else console.log(t,"no end_date"),delete p.h.rdvs[t]}};return(0,v.QT)(p.h.rdvs,$),$(),(e,s)=>{const m=(0,o.up)("ol-view"),A=(0,o.up)("ol-source-osm"),p=(0,o.up)("ol-tile-layer"),v=(0,o.up)("ol-context-menu-control"),S=(0,o.up)("ol-source-vector"),k=(0,o.up)("ol-style-fill"),J=(0,o.up)("ol-style-icon"),V=(0,o.up)("ol-style-text"),Y=(0,o.up)("ol-style"),N=(0,o.up)("ol-vector-layer"),$=(0,o.up)("ol-interaction-select"),ee=(0,o.up)("ol-style-stroke"),te=(0,o.up)("ol-style-circle"),le=(0,o.up)("ol-geom-point"),oe=(0,o.up)("ol-feature"),ae=(0,o.up)("ol-geolocation"),ne=(0,o.up)("ol-map"),ie=(0,o.up)("BCol"),re=(0,o.up)("BFormInput"),ue=(0,o.up)("BRow"),de=(0,o.up)("BModal");return(0,o.wg)(),(0,o.iD)("div",null,[(0,o.Wm)(ne,{loadTilesWhileAnimating:!0,loadTilesWhileInteracting:!0,style:{height:"80vh"},ref_key:"map",ref:f},{default:(0,o.w5)((()=>[(0,o.Wm)(m,{ref_key:"view",ref:g,center:t.value,rotation:n.value,zoom:a.value,projection:l.value},null,8,["center","rotation","zoom","projection"]),(0,o.Wm)(p,null,{default:(0,o.w5)((()=>[(0,o.Wm)(A)])),_:1}),(0,o.Wm)(v,{items:y.value},null,8,["items"]),(0,o.Wm)(N,null,{default:(0,o.w5)((()=>[(0,o.Wm)(S,{ref_key:"markers",ref:D},null,512),(0,o.Wm)(Y,{overrideStyleFunction:X},{default:(0,o.w5)((()=>[(0,o.Wm)(k,{color:K.value},null,8,["color"]),(0,o.Wm)(J,{src:(0,i.SU)(c),scale:.05},null,8,["src"]),(0,o.Wm)(V,{text:"Hellooooo"})])),_:1})])),_:1}),(0,o.Wm)($,{onSelect:j,condition:(0,i.SU)(Z),features:G.value},{default:(0,o.w5)((()=>[(0,o.Wm)(Y,{overrideStyleFunction:X},{default:(0,o.w5)((()=>[(0,o.Wm)(k,{color:K.value},null,8,["color"]),(0,o.Wm)(J,{src:(0,i.SU)(c),scale:.1},null,8,["src"]),(0,o.Wm)(V,{color:"white",text:"Hellooooo"})])),_:1})])),_:1},8,["condition","features"]),(0,o.Wm)(N,null,{default:(0,o.w5)((()=>[(0,o.Wm)(S,{ref_key:"users",ref:W},null,512),(0,o.Wm)(Y,{overrideStyleFunction:X},{default:(0,o.w5)((()=>[(0,o.Wm)(te,{radius:P.value},{default:(0,o.w5)((()=>[(0,o.Wm)(k,{color:K.value},null,8,["color"]),(0,o.Wm)(ee,{color:F.value,width:x.value},null,8,["color","width"]),(0,o.Wm)(V,{text:"Hellooooo"})])),_:1},8,["radius"])])),_:1})])),_:1}),(0,o.Wm)(ae,{projection:l.value,"onChange:position":L},{default:(0,o.w5)((()=>[(0,o._)("template",null,[(0,o.Wm)(N,{zIndex:2},{default:(0,o.w5)((()=>[(0,o.Wm)(S,null,{default:(0,o.w5)((()=>[(0,o.Wm)(oe,{ref:"positionFeature"},{default:(0,o.w5)((()=>[(0,o.Wm)(le,{coordinates:w.value},null,8,["coordinates"]),(0,o.Wm)(Y,null,{default:(0,o.w5)((()=>[(0,o.Wm)(J,{src:(0,i.SU)(d),scale:.1},null,8,["src"])])),_:1})])),_:1},512)])),_:1})])),_:1})])])),_:1},8,["projection"])])),_:1},512),(0,o.wy)((0,o._)("input",{type:"checkbox",id:"checkbox",ref_key:"faking",ref:h,"onUpdate:modelValue":s[0]||(s[0]=e=>(0,i.dq)(H)?H.value=e:H=e)},null,512),[[r.e8,(0,i.SU)(H)]]),U,(0,o.Uk)("    "),(0,o.wy)((0,o._)("input",{type:"checkbox",id:"follow_me",ref_key:"follow_me",ref:I,checked:"","onUpdate:modelValue":s[1]||(s[1]=e=>(0,i.dq)(T)?T.value=e:T=e)},null,512),[[r.e8,(0,i.SU)(T)]]),_,C,B,(0,o.Wm)(de,{modelValue:M.value,"onUpdate:modelValue":s[2]||(s[2]=e=>M.value=e),onOk:Q},{default:(0,o.w5)((()=>[((0,o.wg)(),(0,o.iD)(o.HY,null,(0,o.Ko)(q,(e=>(0,o.Wm)(ue,{class:"my-1",key:e.id},{default:(0,o.w5)((()=>[(0,o.Wm)(ie,{sm:"3"},{default:(0,o.w5)((()=>[(0,o._)("label",{for:`type-${e.name}`},[(0,o._)("code",null,(0,u.zw)(e.name),1),(0,o.Uk)(":")],8,O)])),_:2},1024),(0,o.Wm)(ie,{sm:"9"},{default:(0,o.w5)((()=>[(0,o.Wm)(re,{disabled:!R.value,id:`type-${e.name}`,type:e.type,modelValue:(0,i.SU)(z)[e.id],"onUpdate:modelValue":t=>(0,i.SU)(z)[e.id]=t,min:e.min},null,8,["disabled","id","type","modelValue","onUpdate:modelValue","min"])])),_:2},1024)])),_:2},1024))),64))])),_:1},8,["modelValue"]),E,b,(0,o.Uk)(" 0.0.1 ")])}}},P=l(89);const x=(0,P.Z)(T,[["__scopeId","data-v-5277e260"]]);var F=x,K={name:"HomeView",components:{HelloWorld:F}};const J=(0,P.Z)(K,[["render",n]]);var V=J}}]);
//# sourceMappingURL=about.0db148b7.js.map