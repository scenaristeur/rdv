"use strict";(self["webpackChunkrdv"]=self["webpackChunkrdv"]||[]).push([[443],{7368:function(e,l,t){t.r(l),t.d(l,{default:function(){return U}});var o=t(3396);const a={class:"home"};function n(e,l,t,n,i,u){const r=(0,o.up)("HelloWorld");return(0,o.wg)(),(0,o.iD)("div",a,[(0,o.Wm)(r)])}var i=t(4870),u=t(9242),r=t(7139),d=t(5469),c=t.p+"img/marker.f58b9982.png",s="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAADUElEQVR4Xu2a/ZFNQRDFz0aACBABIkAEiAARIAJEgAjYCBABIkAEiAARUD91p+rtrX13pme6+131bv+zW/VmpnvO9MeZvnOiI5eTI9+/NgA2DzhyBA4RAtclXZN0ZYb9d0lfJX3JPJMsAG5Jui/prqSLlQ0CxEdJp9PfUDyiAeCUX0sCgB4BiIeSACVEIgF4JOmlk9WPJb1yWuvMMlEAcOoPnA1+M3mD67IRALydYt3V0Gmxd5LueS7sDQAuj+tHCqFASLiIJwBkeE4/Q/ACvGFYPAH4dk5tHzZwzwJUhasei3sBQMIj8WUK5ZHEOCReAGSeftmwixd4AAC1/Ww8hvcTR4DoIOQPvOiOcZ0bo9TZAwAy8guD4Uuuaw2lJ6NkywMATvFmIwDPJT2rjOX3p43rfRqg2f9UZANwSdKvyua4LP38nwD4E2Bsq1cBJqB2i4cHtAJA4iPZtUgrAMNenAkAjQ6ydotQVaguLTK0h6HJk3WW04K91e729BDgFS2yiiQIG6Pb0yKAdbsy0HKbpGs0dO328AArD+ASAxeYVwOyP3zCsqFV8IAeJsjmAaKEA27f0i+cO88qmCBGsZHLLTHgOOaHx+3TIwTYU0YjZI6dS2PECwBL5vZygpaKUtXlBQCKiGnrba5q4J4BFlK1qMMTAHr/H3p3ZJxHKS1XaePUs8M9AWBlCynqNXyY/Owq9gYgwwvcTh8gvAGI9gLX048CILIiuGT+yBAoa0fwApe6P088ESGADng97PBCb6abzYP1Qblr3SSzuigAMMTzS5Hbl6AsDyh6PMiRG+k5zz0iPcAjFH5PFx531y9gRAMwGgphrp8JALp6qkJI1s/OAbv6aIryOqxFeC3W2hRtWW/vmIwQKMohSIBQK43EPZuvNU+HNp4dAkVfS2kMj/sMJrh0Okvf/lq+Hbqc/KE8YIkfhNb7fahl5oBdG6DK9A5KUiTpcZUOq/drA2CXJPE/CTJ98yg+lAeUAymlLvWB9KGToGsSG13s0B4wav/w/F4ASFitz2KGjWxcgJ6B+dlcLwCWdzyN9g8P6+oXbgB04r55gOEpWyfG5mmpIcAjBstDBvNuOibAJczP6HtzQId965yyAbDOc8mzavOAPKzXqekvWhOGQSnRji0AAAAASUVORK5CYII=",A="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAADFUlEQVR4Xu2a/bVNMRDF96vAUwE6eCqgA1SADp4KUAEdoAJU8KiADngVoALWb62bta6Y5EySm+uedSZ/3puPmZ2dyew5OdPG29nG/VcAEAzYOAJxBDZOgAiCLUfgtqTnkh5KOm9gTssa1rS/G9b6KemDpJeSvnvGeY27L+l9o+Npfe8aJXtbAEhzAMQjSZ+WQPAYx85/6XSe9T1r1OzsAYD5AOHuEhM8xr2V9HgJycr/njVmAMCc7yQ9qU3uMe7HwO7/TwYkFtwcBcCi4GfP+dot/GKAPQz1jueoWkytbrKHARYARFmvYYP+u4cTqK+M3gHAjCMQDIgjEDEggmDcAu4L6t+ODyRdZD9/lfRxYM6TvwZRkK8WUtOk5p7tcvkWPE4aAPJxnPfKaIAABHSIt00DwGtAqR+xgjpCT5ueb3hS4R7D0xh2/s3IBJKeNjKhabmZAED3bxXaX+9pdYTMrYLlHIc7HTHBBcRMAEp1hF+7QEjpar9RamPMDcPyRV3v8rZVKfVOuhtnqUicZ7fZVavBGmp5OQj0r+r6XltnMYDdpIaYN+p0+c7nfUbGNuMwCwAr8nPm2X1PgwV5TJhyIxwTAKpI3NWeRjX3XtYxAJghwY/JAGjNdeZpXJ/5cVkVA0YC2chYD7h/9ZnFABaxrsGlpKaUPHF9enVEEwgzASglQoBAemslQqTNlqOrTIRKSU3aIWJC+oDJeS9dkUvJU9OO551nMoC1Ni2GEtirl8OH+DIEE14XhI5FYWh/2SiDpxVEDgEAThITAIFrzlJ89MFxgiPOlwRT6cyfPAD7hgOCVRRdEkq1gLcqAIYid2FwABBfh+PzeLwPiAcSRoCMFyK1K8ejBaxECKXn/WxFKWyk5aWx0lzkFSRaTXrHAwAZWSlz8zjmWaM2T+9DyZRZVusIHuM2/1ASnc63+14WeECewQB0Bcei+mjaaxxpJnl6DwjeNUog9BwBnEdvHOSxdDIMJqDta2rOcuKYACQ1iZ0HfS7vCXar7DO6O6t0et/oAGD1WzjoQDBgEMDVDw8GrH4LBx34A8fSukGbT39pAAAAAElFTkSuQmCC",m=t(6866),v=t(1330),p=t(5288),g=t(3029),w=t(5144);const f=e=>((0,o.dD)("data-v-5277e260"),e=e(),(0,o.Cn)(),e),y=f((()=>(0,o._)("label",{for:"checkbox"},"Fake",-1))),W=f((()=>(0,o._)("label",{for:"follow_me"},"Follow me",-1))),D=f((()=>(0,o._)("br",null,null,-1))),h=f((()=>(0,o._)("textarea",{name:"my_interest",id:"",cols:"30",rows:"10"},null,-1))),k=["for"],S=f((()=>(0,o._)("hr",null,null,-1))),I=f((()=>(0,o._)("small",null,[(0,o._)("i",null,"right-click or long tap on the map to add a rdv")],-1)));var H={__name:"HelloWorld",setup(e){(0,p.QB)(m);const l=(0,i.iH)([2.2945009486790244,48.858287635592696]),t=(0,i.iH)("EPSG:4326"),a=(0,i.iH)(17),n=(0,i.iH)(0),f=(0,i.iH)(),H=(0,i.iH)(null),_=(0,i.iH)([]),B=(0,i.iH)([]),C=(0,i.iH)([]),O=(0,i.iH)([]),E=(0,i.iH)(!1),U=(0,i.iH)(!0);let T=!1,b=!0;const P=(0,i.iH)(5),x=(0,i.iH)(1),F=(0,i.iH)("red"),K=(0,i.iH)("white"),J=(0,o.f3)("ol-feature"),M=(0,o.f3)("ol-geom"),G=(0,i.iH)(!1),V=(0,i.iH)(!1),R=(0,i.iH)(new w.Z),Z=(0,o.f3)("ol-selectconditions"),Y=Z.click;function j(e){if(console.log(e),e.selected.length>0){let l=e.selected[0].get("uuid");console.log("selected",e.selected[0],e.selected[0].get("uuid")),z.value=v.h.rdvs[l],console.log(z.value.author,"if author = clientID, edit = true"),V.value=!1,G.value=!0}}const q=[{id:"title",name:"Title",type:"text"},{id:"desc",name:"Description",type:"text"},{id:"color",name:"Color",type:"color"},{id:"start_date",name:"Start Date",type:"date",min:(new Date).toISOString().split("T")[0]},{id:"start_time",name:"Start Time",type:"time"},{id:"end_date",name:"End Date",type:"date",min:(new Date).toISOString().split("T")[0]},{id:"end_time",name:"End Time",type:"time"}];let z=(0,i.iH)({});B.value=[{text:"Center map here",icon:A,classname:"some-style-class",callback:e=>{f.value.setCenter(e.coordinate)}},{text:"Add a rdv",classname:"some-style-class",icon:s,callback:e=>{z.value={uuid:(0,g.Z)(),author:v.kW.clientID,coordinates:e.coordinate,start_date:(new Date).toISOString().split("T")[0],end_date:(new Date).toISOString().split("T")[0],start_time:"00:00",end_time:"23:59"},V.value=!0,G.value=!0}},"-"];const Q=()=>{console.log(z.value),z.value.updated=Date.now();const e=new J({geometry:new M.Point(z.value.coordinates),data:z.value});1==V.value&&(C.value.source.addFeature(e),v.h.rdvs[z.value.uuid]=z.value)},X=(e,l)=>{let t=e.get("color");void 0!=l.getImage().getFill&&l.getImage().getFill().setColor(t);let o=e.get("name");l.getText().setText(o)};v.kW.setLocalStateField("user",{name:"user_"+Date.now(),color:"#ffb61e",clientID:v.kW.clientID});const L=e=>{console.log(v.kW.clientID,e);let l=e.target.getPosition();E.value.checked&&(l[0]+=.02*Math.random()-.01,l[1]+=.02*Math.random()-.01),_.value=l,console.log("follow_me.value.checked",U.value.checked),U.value.checked&&f.value?.setCenter(l),v.kW.setLocalStateField("position",{coordinates:l,updated:Date.now()})},N=e=>{e.forEach((e=>{if(void 0!=e.position&&null!=O.value&&e.user.clientID!=v.kW.clientID&&void 0!=O.value.source){let l=O.value.source.getFeatures().find((l=>l.get("clientID")==e.user.clientID));if(void 0==l){const l=new J({geometry:new M.Point(e.position.coordinates),name:e.user.name,color:e.user.color,clientID:e.user.clientID});O.value.source.addFeature(l)}else l.getGeometry().setCoordinates(e.position.coordinates)}}))};v.kW.on("change",(()=>{N(Array.from(v.kW.getStates().values()))}));const $=e=>{if(console.log(e),null!=C.value)for(let[l,t]of Object.entries(v.h.rdvs))if(l!=v.kW.clientID){console.log("coordin",l,t.coordinates[0],t.coordinates[1],t.title),console.log("dates",l,t.end_date,t.end_time);let e=t.end_date+"T"+t.end_time+":00Z",o=new Date(e),a=Date.now();console.log(a,o);let n=o.getTime()-a;if(n<0)return void delete v.h.rdvs[l];if(void 0!=t.end_date&&void 0!=t.end_time){const e=new J({geometry:new M.Point(t.coordinates),name:t.title,uuid:l});C.value.source.addFeature(e)}else console.log(l,"no end_date"),delete v.h.rdvs[l]}};return(0,p.QT)(v.h.rdvs,$),$(),(e,s)=>{const A=(0,o.up)("ol-view"),m=(0,o.up)("ol-source-osm"),v=(0,o.up)("ol-tile-layer"),p=(0,o.up)("ol-context-menu-control"),g=(0,o.up)("ol-source-vector"),w=(0,o.up)("ol-style-fill"),J=(0,o.up)("ol-style-icon"),M=(0,o.up)("ol-style-text"),Z=(0,o.up)("ol-style"),N=(0,o.up)("ol-vector-layer"),$=(0,o.up)("ol-interaction-select"),ee=(0,o.up)("ol-style-stroke"),le=(0,o.up)("ol-style-circle"),te=(0,o.up)("ol-geom-point"),oe=(0,o.up)("ol-feature"),ae=(0,o.up)("ol-geolocation"),ne=(0,o.up)("ol-map"),ie=(0,o.up)("BCol"),ue=(0,o.up)("BFormInput"),re=(0,o.up)("BRow"),de=(0,o.up)("BModal");return(0,o.wg)(),(0,o.iD)("div",null,[(0,o.Wm)(ne,{loadTilesWhileAnimating:!0,loadTilesWhileInteracting:!0,style:{height:"80vh"},ref_key:"map",ref:H},{default:(0,o.w5)((()=>[(0,o.Wm)(A,{ref_key:"view",ref:f,center:l.value,rotation:n.value,zoom:a.value,projection:t.value},null,8,["center","rotation","zoom","projection"]),(0,o.Wm)(v,null,{default:(0,o.w5)((()=>[(0,o.Wm)(m)])),_:1}),(0,o.Wm)(p,{items:B.value},null,8,["items"]),(0,o.Wm)(N,null,{default:(0,o.w5)((()=>[(0,o.Wm)(g,{ref_key:"markers",ref:C},null,512),(0,o.Wm)(Z,{overrideStyleFunction:X},{default:(0,o.w5)((()=>[(0,o.Wm)(w,{color:K.value},null,8,["color"]),(0,o.Wm)(J,{src:(0,i.SU)(c),scale:.05},null,8,["src"]),(0,o.Wm)(M,{text:"Hellooooo"})])),_:1})])),_:1}),(0,o.Wm)($,{onSelect:j,condition:(0,i.SU)(Y),features:R.value},{default:(0,o.w5)((()=>[(0,o.Wm)(Z,{overrideStyleFunction:X},{default:(0,o.w5)((()=>[(0,o.Wm)(w,{color:K.value},null,8,["color"]),(0,o.Wm)(J,{src:(0,i.SU)(c),scale:.1},null,8,["src"]),(0,o.Wm)(M,{color:"white",text:"Hellooooo"})])),_:1})])),_:1},8,["condition","features"]),(0,o.Wm)(N,null,{default:(0,o.w5)((()=>[(0,o.Wm)(g,{ref_key:"users",ref:O},null,512),(0,o.Wm)(Z,{overrideStyleFunction:X},{default:(0,o.w5)((()=>[(0,o.Wm)(le,{radius:P.value},{default:(0,o.w5)((()=>[(0,o.Wm)(w,{color:K.value},null,8,["color"]),(0,o.Wm)(ee,{color:F.value,width:x.value},null,8,["color","width"]),(0,o.Wm)(M,{text:"Hellooooo"})])),_:1},8,["radius"])])),_:1})])),_:1}),(0,o.Wm)(ae,{projection:t.value,"onChange:position":L},{default:(0,o.w5)((()=>[(0,o._)("template",null,[(0,o.Wm)(N,{zIndex:2},{default:(0,o.w5)((()=>[(0,o.Wm)(g,null,{default:(0,o.w5)((()=>[(0,o.Wm)(oe,{ref:"positionFeature"},{default:(0,o.w5)((()=>[(0,o.Wm)(te,{coordinates:_.value},null,8,["coordinates"]),(0,o.Wm)(Z,null,{default:(0,o.w5)((()=>[(0,o.Wm)(J,{src:(0,i.SU)(d),scale:.1},null,8,["src"])])),_:1})])),_:1},512)])),_:1})])),_:1})])])),_:1},8,["projection"])])),_:1},512),(0,o.wy)((0,o._)("input",{type:"checkbox",id:"checkbox",ref_key:"faking",ref:E,"onUpdate:modelValue":s[0]||(s[0]=e=>(0,i.dq)(T)?T.value=e:T=e)},null,512),[[u.e8,(0,i.SU)(T)]]),y,(0,o.Uk)("    "),(0,o.wy)((0,o._)("input",{type:"checkbox",id:"follow_me",ref_key:"follow_me",ref:U,checked:"","onUpdate:modelValue":s[1]||(s[1]=e=>(0,i.dq)(b)?b.value=e:b=e)},null,512),[[u.e8,(0,i.SU)(b)]]),W,D,h,(0,o.Wm)(de,{modelValue:G.value,"onUpdate:modelValue":s[2]||(s[2]=e=>G.value=e),onOk:Q},{default:(0,o.w5)((()=>[((0,o.wg)(),(0,o.iD)(o.HY,null,(0,o.Ko)(q,(e=>(0,o.Wm)(re,{class:"my-1",key:e.id},{default:(0,o.w5)((()=>[(0,o.Wm)(ie,{sm:"3"},{default:(0,o.w5)((()=>[(0,o._)("label",{for:`type-${e.name}`},[(0,o._)("code",null,(0,r.zw)(e.name),1),(0,o.Uk)(":")],8,k)])),_:2},1024),(0,o.Wm)(ie,{sm:"9"},{default:(0,o.w5)((()=>[(0,o.Wm)(ue,{disabled:!V.value,id:`type-${e.name}`,type:e.type,modelValue:(0,i.SU)(z)[e.id],"onUpdate:modelValue":l=>(0,i.SU)(z)[e.id]=l,min:e.min},null,8,["disabled","id","type","modelValue","onUpdate:modelValue","min"])])),_:2},1024)])),_:2},1024))),64))])),_:1},8,["modelValue"]),S,I,(0,o.Uk)(" 0.0.1 ")])}}},_=t(89);const B=(0,_.Z)(H,[["__scopeId","data-v-5277e260"]]);var C=B,O={name:"HomeView",components:{HelloWorld:C}};const E=(0,_.Z)(O,[["render",n]]);var U=E}}]);
//# sourceMappingURL=about.36a9fdb5.js.map